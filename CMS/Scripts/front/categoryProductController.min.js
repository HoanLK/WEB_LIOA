frontApp.controller("categoryProductController",["$scope","$http","$window","CategoryProduct",function(n,t){function i(n,t){for(var r=angular.copy(n),i=angular.copy(t-1);r[i]!=" "&&i<r.length-1;)i++;return r.substring(0,i)+"..."}n.categoryProducts=[];n.products=[];n.idCategoryProduct=angular.element("#idCategoryProduct").val();n.product={};n.spNoiBats=[];n.spKhac=[];n.spMoiHomes=[];n.tinNoiBats1=[];t.get("/API/CategoryProductsAPI?att=idCategoryParent&&value=1").success(function(r){n.categoryProducts=r;angular.forEach(n.categoryProducts,function(r,u){t.get("/Products/Get4NewByCategory/"+r.idCategory).success(function(t){n.categoryProducts[u].new4Products=angular.copy(t)});t.get("/Products/Get4FeatureByCategory/"+r.idCategory).success(function(t){angular.forEach(t,function(n){n.description=n.description.length>97?i(n.description,100):n.description});n.categoryProducts[u].homeProducts=angular.copy(t)})})});n.show=function(i){n.id=i;t.get("/API/ProductsAPI/"+i).success(function(t){n.product=t})};t.get("/API/ProductsAPI?att=idCategoryProduct&&value="+n.idCategoryProduct).success(function(t){n.products=t});t.get("/API/ProductsAPI?att=spMoiHome&&value=0").success(function(t){n.spMoiHomes=t});t.get("/Products/GetByOtherCategory/"+n.idCategoryProduct).success(function(t){n.spKhac=t});t.get("/API/ProductsAPI/").success(function(t){angular.forEach(t,function(t){t.feature=="1"&&n.spNoiBats.push(t)})});t.get("/API/PostsAPI?att=feature1&&value=1").success(function(t){n.tinNoiBats1=t});t.get("/AccessCounter/GetCountDay").success(function(t){n.accessCountDay=t});t.get("/AccessCounter/GetCountMonth").success(function(t){n.accessCountMonth=t});t.get("/AccessCounter/GetCountMonthBefore").success(function(t){n.accessCountMonthBefore=t})}]);