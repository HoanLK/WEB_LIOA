myApp.controller("themImageController",["$scope","$http","$window","$location","$filter","Url","MenuMultiLevel",function(n,t,i,r,u,f,e){n.image={};n.categories=[];n.category={};n.chooseImage=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.image.anh=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};t.get("/API/CategoryProductsAPI/").success(function(t){n.categories=e.getDropdownMenuCategoryProduct(t)});n.currentIdImage=f.getParameterByName("id");n.currentIdImage&&t.get("/API/ImageAPI/"+n.currentIdImage).success(function(t){n.image={id:t.id,title:t.title,ghichu:t.ghichu,anh:t.anh,idCategoryProduct:t.idCategoryProduct};n.category={id:t.idCategoryProduct}});n.saveImage=function(){n.image.idCategoryProduct=n.category.id;n.currentIdImage?t.put("/API/ImageAPI/"+n.image.id,n.image).success(function(){toastr.success("Thành công","Lưu hình ảnh")}).error(function(){toastr.error("Thất bại","Thêm hình ảnh")}):t.post("/API/imageAPI/",n.image).success(function(){toastr.success("Thành công","Thêm hình ảnh");i.location.href="/Admin/Images"}).error(function(){toastr.error("Thất bại","Thêm hình ảnh")})};n.saveImageAndExit=function(){n.image.idCategoryProduct=n.category.id;n.currentIdImage?t.put("/API/ImageAPI/"+n.image.id,n.image).success(function(){i.location.href="/Admin/Images"}).error(function(){toastr.error("Thất bại","Lưu hình ảnh")}):t.post("/API/ImageAPI/",n.image).success(function(){i.location.href="/Admin/Images"}).error(function(){toastr.error("Thất bại","Thêm hình ảnh")})};n.saveImageAndNew=function(){n.image.idCategoryProduct=n.category.id;n.currentIdImage?t.put("/API/ImageAPI/"+n.image.id,n.image).success(function(){i.location.href="/Admin/Images/Create"}).error(function(){toastr.error("Thất bại","Lưu hình ảnh")}):t.post("/API/ImageAPI/",n.image).success(function(){i.location.href="/Admin/images/Create"}).error(function(){toastr.error("Thất bại","Thêm hình ảnh")})};n.cancel=function(){i.location.href="/Admin/Images"};console.log(n.image.image)}]);